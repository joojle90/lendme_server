"use strict";
/**
 * Created by Joojle on 10/04/18.
 */
var express = require("express");
var q_style_1 = require("./q_style");
var router = express.Router();
var db = require('../../database/db.service');
var authentication = require('../../utils/authentication');
// get all campgrounds
router.get('/style', function (req, res) {
    db.getConnection(function (err, connection) {
        if (err) {
            res.status(500).send({ message: err });
        }
        else {
            var params_1 = req.query;
            var record = void 0, query_line_1 = "";
            record = "" + q_style_1.STYLE_SELECTIVE;
            if (Object.keys(params_1).length > 0) {
                Object.keys(params_1).forEach(function (key, index) {
                    if (key === "styleItem") {
                        var criteria = params_1.styleItem === "" ? "" : " AND style_item = " + ("'" + params_1.styleItem + "'");
                        query_line_1 += criteria;
                    }
                });
            }
            record += query_line_1;
            console.log("RECORD", record);
            connection.query(record, function (err, results) {
                connection.release();
                if (err) {
                    res.status(500).send({ message: err });
                }
                else {
                    res.send(results);
                }
            });
        }
    });
});
module.exports = router;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcy9zdHlsZS9zdHlsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7QUFFSCxpQ0FBbUM7QUFDbkMscUNBQTRDO0FBRTVDLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUVoQyxJQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQztBQUNoRCxJQUFNLGNBQWMsR0FBRyxPQUFPLENBQUMsNEJBQTRCLENBQUMsQ0FBQztBQUU3RCxzQkFBc0I7QUFDdEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsVUFBQyxHQUFRLEVBQUUsR0FBUTtJQUN2QyxFQUFFLENBQUMsYUFBYSxDQUFDLFVBQUMsR0FBUSxFQUFFLFVBQWU7UUFDMUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNULEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUMsT0FBTyxFQUFFLEdBQUcsRUFBQyxDQUFDLENBQUM7UUFDdEMsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ1AsSUFBTSxRQUFNLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztZQUV6QixJQUFJLE1BQU0sU0FBQSxFQUFFLFlBQVUsR0FBRyxFQUFFLENBQUM7WUFFNUIsTUFBTSxHQUFHLEtBQUkseUJBQWtCLENBQUM7WUFFaEMsRUFBRSxDQUFBLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFNLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbkMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQyxHQUFHLEVBQUUsS0FBSztvQkFDdEMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLFdBQVcsQ0FBQyxDQUFDLENBQUM7d0JBQ3pCLElBQU0sUUFBUSxHQUFHLFFBQU0sQ0FBQyxTQUFTLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLG9CQUFvQixJQUFHLE1BQUssUUFBTSxDQUFDLFNBQVMsTUFBSSxDQUFBLENBQUM7d0JBQ2pHLFlBQVUsSUFBSSxRQUFRLENBQUM7b0JBQ3hCLENBQUM7Z0JBQ0YsQ0FBQyxDQUFDLENBQUM7WUFDSixDQUFDO1lBRUQsTUFBTSxJQUFLLFlBQVUsQ0FBQztZQUN0QixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztZQUU5QixVQUFVLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxVQUFDLEdBQVEsRUFBRSxPQUFZO2dCQUMvQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBRXJCLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7b0JBQ1QsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBQyxPQUFPLEVBQUUsR0FBRyxFQUFDLENBQUMsQ0FBQztnQkFDdEMsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDUCxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUNuQixDQUFDO1lBQ0YsQ0FBQyxDQUFDLENBQUM7UUFDSixDQUFDO0lBQ0YsQ0FBQyxDQUFDLENBQUM7QUFDSixDQUFDLENBQUMsQ0FBQztBQUVILGlCQUFTLE1BQU0sQ0FBQyIsImZpbGUiOiJyb3V0ZXMvc3R5bGUvc3R5bGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgSm9vamxlIG9uIDEwLzA0LzE4LlxuICovXG5cbmltcG9ydCAqIGFzIGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBTVFlMRV9TRUxFQ1RJVkUgfSBmcm9tIFwiLi9xX3N0eWxlXCI7XG5cbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbmNvbnN0IGRiID0gcmVxdWlyZSgnLi4vLi4vZGF0YWJhc2UvZGIuc2VydmljZScpO1xuY29uc3QgYXV0aGVudGljYXRpb24gPSByZXF1aXJlKCcuLi8uLi91dGlscy9hdXRoZW50aWNhdGlvbicpO1xuXG4vLyBnZXQgYWxsIGNhbXBncm91bmRzXG5yb3V0ZXIuZ2V0KCcvc3R5bGUnLCAocmVxOiBhbnksIHJlczogYW55KSA9PiB7XG5cdGRiLmdldENvbm5lY3Rpb24oKGVycjogYW55LCBjb25uZWN0aW9uOiBhbnkpID0+IHtcblx0XHRpZiAoZXJyKSB7XG5cdFx0XHRyZXMuc3RhdHVzKDUwMCkuc2VuZCh7bWVzc2FnZTogZXJyfSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IHBhcmFtcyA9IHJlcS5xdWVyeTtcblxuXHRcdFx0bGV0IHJlY29yZCwgcXVlcnlfbGluZSA9IFwiXCI7XG5cblx0XHRcdHJlY29yZCA9IGAkeyBTVFlMRV9TRUxFQ1RJVkUgfWA7XG5cblx0XHRcdGlmKE9iamVjdC5rZXlzKHBhcmFtcykubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRPYmplY3Qua2V5cyhwYXJhbXMpLmZvckVhY2goKGtleSwgaW5kZXgpID0+IHtcblx0XHRcdFx0XHRpZiAoa2V5ID09PSBcInN0eWxlSXRlbVwiKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBjcml0ZXJpYSA9IHBhcmFtcy5zdHlsZUl0ZW0gPT09IFwiXCIgPyBcIlwiIDogXCIgQU5EIHN0eWxlX2l0ZW0gPSBcIiArIGAnJHsgcGFyYW1zLnN0eWxlSXRlbSB9J2A7XG5cdFx0XHRcdFx0XHRxdWVyeV9saW5lICs9IGNyaXRlcmlhO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHJlY29yZCArPSAgcXVlcnlfbGluZTtcblx0XHRcdGNvbnNvbGUubG9nKFwiUkVDT1JEXCIsIHJlY29yZCk7XG5cblx0XHRcdGNvbm5lY3Rpb24ucXVlcnkocmVjb3JkLCAoZXJyOiBhbnksIHJlc3VsdHM6IGFueSkgPT4ge1xuXHRcdFx0XHRjb25uZWN0aW9uLnJlbGVhc2UoKTtcblxuXHRcdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdFx0cmVzLnN0YXR1cyg1MDApLnNlbmQoe21lc3NhZ2U6IGVycn0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlcy5zZW5kKHJlc3VsdHMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xufSk7XG5cbmV4cG9ydCA9IHJvdXRlcjsiXX0=
